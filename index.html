<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Restaurant System PRO</title>

<style>
body{font-family:Arial;background:#f4f6f8;margin:0;padding:15px;}
.card{background:#fff;padding:15px;border-radius:12px;margin-bottom:15px;box-shadow:0 2px 6px rgba(0,0,0,0.1);}
button{padding:8px;border:none;border-radius:8px;margin:4px;font-size:14px;}
.dark{background:#111;color:#fff;width:100%;}
.light{background:#ddd;width:100%;}
.nav{display:flex;gap:5px;margin-bottom:10px;}
.nav button{flex:1;}
.menu-grid{display:grid;grid-template-columns:1fr 1fr;gap:10px;}
.hidden{display:none;}
input,select{width:100%;padding:8px;margin:5px 0;border-radius:6px;border:1px solid #ccc;}
.bill-box{background:#f9f9f9;padding:8px;border-radius:8px;margin-bottom:8px;font-size:13px;}
.income-box{border-left:5px solid #4CAF50;}
.expense-box{border-left:5px solid #f44336;}
.section-title{font-weight:bold;margin-bottom:5px;}

.toast{
position:fixed;
top:20px;
right:20px;
background:#4CAF50;
color:white;
padding:12px 18px;
border-radius:8px;
box-shadow:0 4px 10px rgba(0,0,0,0.2);
opacity:0;
transition:0.3s;
z-index:999;
}
.toast.show{opacity:1;}
</style>
</head>

<body>

<div class="toast" id="toast"></div>

<div class="nav">
<button onclick="show('home')">üè†</button>
<button onclick="show('income')">üí∞</button>
<button onclick="show('expense')">üí∏</button>
<button onclick="show('data')">üìä</button>
<button onclick="resetData()">üóë</button>
</div>

<!-- DASHBOARD -->
<div id="home" class="card">
<h3>‡∏™‡∏£‡∏∏‡∏õ‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ</h3>
<div>üíµ ‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏î: <span id="cashTotal">0</span></div>
<div>üì≤ ‡πÇ‡∏≠‡∏ô: <span id="transferTotal">0</span></div>
<div>üõµ Grab: <span id="grabTotal">0</span></div>
<div>üü¢ LINE MAN: <span id="linemanTotal">0</span></div>
<hr>
<div><strong>‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö‡∏£‡∏ß‡∏°:</strong> <span id="incomeTotal">0</span></div>
<div><strong>‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢‡∏£‡∏ß‡∏°:</strong> <span id="expenseTotal">0</span></div>
<div><strong>‡∏Å‡∏≥‡πÑ‡∏£:</strong> <span id="profitTotal">0</span></div>
</div>

<!-- INCOME -->
<div id="income" class="card hidden">
<h3>‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö</h3>

<select id="paymentType">
<option value="‡∏™‡∏î">‡∏™‡∏î</option>
<option value="‡πÇ‡∏≠‡∏ô">‡πÇ‡∏≠‡∏ô</option>
<option value="Grab">Grab</option>
<option value="LINE MAN">LINE MAN</option>
</select>

<div class="menu-grid">
<div>
<div class="section-title">üçú ‡πÄ‡∏°‡∏ô‡∏π‡∏´‡∏•‡∏±‡∏Å</div>
<button class="light" onclick="addMenu('‡∏ô‡πâ‡∏≥‡∏¢‡∏≤‡∏õ‡∏•‡∏≤',50)">‡∏ô‡πâ‡∏≥‡∏¢‡∏≤‡∏õ‡∏•‡∏≤ 50</button>
<button class="light" onclick="addMenu('‡∏ô‡πâ‡∏≥‡∏¢‡∏≤‡∏õ‡πà‡∏≤',50)">‡∏ô‡πâ‡∏≥‡∏¢‡∏≤‡∏õ‡πà‡∏≤ 50</button>
<button class="light" onclick="addMenu('‡∏ô‡πâ‡∏≥‡∏¢‡∏≤‡∏ú‡∏™‡∏°',50)">‡∏ô‡πâ‡∏≥‡∏¢‡∏≤‡∏ú‡∏™‡∏° 50</button>
<button class="light" onclick="addMenu('‡∏ô‡πâ‡∏≥‡∏¢‡∏≤‡∏õ‡∏π',70)">‡∏ô‡πâ‡∏≥‡∏¢‡∏≤‡∏õ‡∏π 70</button>
</div>
<div>
<div class="section-title">‚ûï Add On</div>
<button class="light" onclick="addMenu('‡∏•‡∏π‡∏Å‡∏ä‡∏¥‡πâ‡∏ô',10)">‡∏•‡∏π‡∏Å‡∏ä‡∏¥‡πâ‡∏ô 10</button>
<button class="light" onclick="addMenu('‡πÄ‡∏ó‡πâ‡∏≤‡πÑ‡∏Å‡πà',20)">‡πÄ‡∏ó‡πâ‡∏≤‡πÑ‡∏Å‡πà 20</button>
<button class="light" onclick="addMenu('‡∏•‡∏π‡∏Å‡∏ä‡∏¥‡πâ‡∏ô+‡πÄ‡∏ó‡πâ‡∏≤‡πÑ‡∏Å‡πà',20)">‡∏•‡∏π‡∏Å‡∏ä‡∏¥‡πâ‡∏ô+‡πÄ‡∏ó‡πâ‡∏≤‡πÑ‡∏Å‡πà 20</button>
<button class="light" onclick="addMenu('‡∏Ç‡∏ô‡∏°‡∏à‡∏µ‡∏ô',10)">‡∏Ç‡∏ô‡∏°‡∏à‡∏µ‡∏ô 10</button>
<button class="light" onclick="addMenu('‡πÑ‡∏Ç‡πà‡∏ï‡πâ‡∏°',10)">‡πÑ‡∏Ç‡πà‡∏ï‡πâ‡∏° 10</button>
</div>
</div>

<h4>‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÉ‡∏ô‡∏ö‡∏¥‡∏•</h4>
<div id="billList">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</div>
<div><strong>‡∏£‡∏ß‡∏°: <span id="billTotal">0</span> ‡∏ö‡∏≤‡∏ó</strong></div>

<button onclick="clearBill()">üßπ ‡∏•‡πâ‡∏≤‡∏á‡∏ö‡∏¥‡∏•</button>
<button class="dark" onclick="saveIncome()">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö</button>
</div>

<!-- EXPENSE -->
<div id="expense" class="card hidden">
<h3>‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢</h3>
<input type="number" id="expenseAmount" placeholder="‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô">
<input type="text" id="expenseNote" placeholder="‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î">
<button class="dark" onclick="saveExpense()">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢</button>
</div>

<!-- DATA -->
<div id="data" class="card hidden">
<h3>‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏¢‡πâ‡∏≠‡∏ô‡∏´‡∏•‡∏±‡∏á</h3>
<div id="allData"></div>
</div>

<script>
function today(){ return new Date().toISOString().split("T")[0]; }
function nowTime(){ return new Date().toLocaleTimeString(); }

let db = JSON.parse(localStorage.getItem("restaurantDB")) || {};
let currentBill=[];

function showToast(message){
let toast=document.getElementById("toast");
toast.innerText=message;
toast.classList.add("show");
setTimeout(()=>toast.classList.remove("show"),2000);
}

function show(page){
["home","income","expense","data"].forEach(id=>{
document.getElementById(id).classList.add("hidden");
});
document.getElementById(page).classList.remove("hidden");
updateDashboard();
renderAllData();
}

function addMenu(name,price){
currentBill.push({name,price:Number(price)||0});
renderBill();
}

function renderBill(){
let total=0;
if(currentBill.length===0){
document.getElementById("billList").innerHTML="‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£";
document.getElementById("billTotal").innerText=0;
return;
}

let html="";
currentBill.forEach((item,index)=>{
total+=item.price;
html+=`
<div style="display:flex;justify-content:space-between;margin-bottom:5px;">
<span>${item.name} - ${item.price} ‡∏ö‡∏≤‡∏ó</span>
<button onclick="removeItem(${index})" style="background:red;color:white;border:none;border-radius:5px;">‚ùå</button>
</div>`;
});

document.getElementById("billList").innerHTML=html;
document.getElementById("billTotal").innerText=total;
}

function removeItem(index){
currentBill.splice(index,1);
renderBill();
}

function clearBill(){
currentBill=[];
renderBill();
showToast("‡∏•‡πâ‡∏≤‡∏á‡∏ö‡∏¥‡∏•‡πÅ‡∏•‡πâ‡∏ß");
}

function saveIncome(){
let t=today();
if(!db[t]) db[t]={income:[],expense:[]};
if(currentBill.length===0){
showToast("‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£");
return;
}

let total=currentBill.reduce((a,b)=>a+b.price,0);

db[t].income.push({
items:[...currentBill],
total:total,
payment:document.getElementById("paymentType").value,
time:nowTime()
});

currentBill=[];
renderBill();
saveDB();
updateDashboard();
renderAllData();
showToast("‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢");
}

function saveExpense(){
let t=today();
if(!db[t]) db[t]={income:[],expense:[]};

let amt=Number(document.getElementById("expenseAmount").value)||0;
let note=document.getElementById("expenseNote").value||"-";

db[t].expense.push({amount:amt,note,time:nowTime()});

document.getElementById("expenseAmount").value="";
document.getElementById("expenseNote").value="";

saveDB();
updateDashboard();
renderAllData();
showToast("‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢");
}

function updateDashboard(){
let t=today();
if(!db[t]){
document.getElementById("incomeTotal").innerText=0;
document.getElementById("expenseTotal").innerText=0;
document.getElementById("profitTotal").innerText=0;
return;
}

let cash=0,transfer=0,grab=0,lineman=0;

(db[t].income||[]).forEach(b=>{
if(b.payment==="‡∏™‡∏î") cash+=b.total;
if(b.payment==="‡πÇ‡∏≠‡∏ô") transfer+=b.total;
if(b.payment==="Grab") grab+=b.total;
if(b.payment==="LINE MAN") lineman+=b.total;
});

let income=cash+transfer+grab+lineman;
let expense=(db[t].expense||[]).reduce((a,b)=>a+b.amount,0);

document.getElementById("cashTotal").innerText=cash;
document.getElementById("transferTotal").innerText=transfer;
document.getElementById("grabTotal").innerText=grab;
document.getElementById("linemanTotal").innerText=lineman;
document.getElementById("incomeTotal").innerText=income;
document.getElementById("expenseTotal").innerText=expense;
document.getElementById("profitTotal").innerText=income-expense;
}

function renderAllData(){
let html="";
let dates=Object.keys(db).sort().reverse();

if(dates.length===0){
document.getElementById("allData").innerHTML="‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•";
return;
}

dates.forEach(date=>{
html+=`<h4>üìÖ ${date}</h4>`;

(db[date].income||[]).forEach((b,i)=>{
html+=`
<div class="bill-box income-box">
üü¢ ‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö ‡∏ö‡∏¥‡∏• ${i+1} | ${b.payment} | ${b.total} ‡∏ö‡∏≤‡∏ó | ${b.time}<br>
`;
(b.items||[]).forEach(item=>{
html+=`- ${item.name} (${item.price})<br>`;
});
html+="</div>";
});

(db[date].expense||[]).forEach(e=>{
html+=`
<div class="bill-box expense-box">
üî¥ ‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢ | ${e.note} | ${e.amount} ‡∏ö‡∏≤‡∏ó | ${e.time}
</div>`;
});
});

document.getElementById("allData").innerHTML=html;
}

function resetData(){
if(confirm("‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?")){
localStorage.removeItem("restaurantDB");
location.reload();
}
}

function saveDB(){
localStorage.setItem("restaurantDB",JSON.stringify(db));
}

updateDashboard();
renderAllData();
renderBill();
</script>

</body>
</html>
